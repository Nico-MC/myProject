<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>    <title>myproject</title>
    <!-- CSS -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Skranji:700" rel="stylesheet"-->
    <link rel="stylesheet" type="text/css" href="assets/css/page.css">
    <link rel="stylesheet" type="text/css" href="assets/css/game.css">
    <link rel="stylesheet" type="text/css" href="assets/css/auctionhouse.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- DATABASE -->
    <!-- <script src="https://www.baqend.com/js-sdk/latest/baqend.min.js"></script> -->
    <script type="text/javascript" src="//www.baqend.com/js-sdk/latest/baqend-realtime.js"></script>
    <!-- MODULES -->
    <script type="text/javascript" src="modules/phaser.min.js"></script>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
  </head>
  <body>


    <script type="text/javascript" src="js/db.js"></script>
    <script type="text/javascript">

      function transferToLogin(fade, sk) {
        // Hier noch secutrity key
        if(DB.User.me.securitykey === sk) {
          sk = null;
          console.log("Schl√ºssel ist korrekt.");
          if(fade) {
            $('body').fadeOut("slow", function() {
              $('body').load('assets/content/content.html #part_1', function() {
                startGame();
              });
            });
          } else {
            $('body').load('assets/content/content.html #part_1', function() {
              startGame();
            });
          }
        }
      }

      function transferToRegister() {
        $('body').load('assets/content/content.html .register_container', function() {
          $('.register_div').fadeIn(2000);
          // Click on register-button
          $("#register").submit(function(event) {
            event.preventDefault();
            register($(this).serializeArray(), function() {
              transferToLogin(true, DB.User.me.securitykey);
            });
          });
          // Click on login-button
          $("#login").submit(function(event) {
            event.preventDefault();
            login($(this).serializeArray(), function(sk) {
              transferToLogin(true, sk);
            });
          });
        });
      }

      function errormessage(message) {
        $('.alert').css('color', '#721c24');
        $('.alert').css('background-color', '#f8d7da');
        $('.alert').css('border-color', '#f5c6cb');
        $('.alert').html(message);
        $('.alert').toggle("slow").delay(2000).toggle("slow");
      }

      function registermessage(callback) {
        $('.alert').css('color', '#21721c');
        $('.alert').css('background-color', '#d8f8d7');
        $('.alert').css('border-color', '#c6f5c6');
        $('.alert').html("Registrierung erfolgreich!");
        $('.alert').toggle("slow").delay(5000).toggle("slow");
        return callback();
      }

      function switchRegister() {
        if($('.register_div #register').css('display') != 'none') {
          $('.register_div #register').slideUp("slow", function() {
            $('.register_div #login').slideDown("slow");
          });
        } else {
          $('.register_div #login').slideUp("slow", function() {
            $('.register_div #register').slideDown("slow");
          });
        }
      }

      $('#search').submit(function(e) {
        e.preventDefault();
        search_result = $('#search_field').val();
        search(search_result);
      });

      // Clear text search_field
      $("#search_field").val("");

      function resize(obj) {
        var target = $(obj).attr("href");
        var oldHeight = $('.tab-pane.active').height();
        var newHeight = $(target).height();
        $(target).height(oldHeight);

        setTimeout(function() {
          $(".tab-pane.active").height(newHeight);
        }, 300);
    }
    </script>

    <!-- LOADING GAME -->
    <script type="text/javascript" src="js/states/Boot.js"></script>
    <script type="text/javascript" src="js/states/Preload.js"></script>
    <script type="text/javascript" src="js/states/Menu.js"></script>
    <script type="text/javascript" src="js/states/game/Game.js"></script>
    <script type="text/javascript" src="js/states/game/Movement.js"></script>
    <script type="text/javascript" src="js/states/game/Ui.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
  </body>
</html>
